// HPC-specific configuration for SLURM clusters
// Usage: nextflow run main.nf -c conf/slurm.config

// Override default parameters for HPC
params {
    max_cpus = 32
    max_memory = '128.GB'
    max_time = '48.h'
}

process {
    executor = 'slurm'
    queue = 'general'  // CHANGE THIS to your cluster's queue name
    clusterOptions = '--account=your_account'  // CHANGE THIS to your HPC account

    // Use scratch directory for temp files
    scratch = '$SLURM_SCRATCH'

    // Load modules before running
    beforeScript = 'module purge'

    // HPC-specific resource allocations
    withLabel: 'basic' {
        cpus = 2
        memory = '4.GB'
        time = '2.h'
    }

    withLabel: 'download' {
        cpus = 2
        memory = '4.GB'
        time = '8.h'
    }

    withLabel: 'fasterq_dump' {
        cpus = 16
        memory = '64.GB'
        time = '12.h'
    }

    withLabel: 'fastp' {
        cpus = 8
        memory = '16.GB'
        time = '4.h'
    }

    withLabel: 'bwa_index' {
        cpus = 8
        memory = '16.GB'
        time = '8.h'
    }

    withLabel: 'bwa_mem' {
        cpus = 16
        memory = '64.GB'
        time = '24.h'
    }

    withLabel: 'samsort' {
        cpus = 16
        memory = '64.GB'
        time = '8.h'
    }

    withLabel: 'markdups' {
        cpus = 8
        memory = '32.GB'
        time = '8.h'
    }

    withLabel: 'gatk' {
        cpus = 8
        memory = '32.GB'
        time = '24.h'
    }

    withLabel: 'mpileup' {
        cpus = 4
        memory = '16.GB'
        time = '8.h'
    }

    withLabel: 'varscan' {
        cpus = 4
        memory = '16.GB'
        time = '8.h'
    }
}

// HPC execution settings
executor {
    queueSize = 50
    submitRateLimit = '10 sec'
}
